
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Developer guide &mdash; fatiando 0.4 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.2.0/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/font-awesome/css/font-awesome.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '429a4e7de0857f3152fc8af6024d675dd9cf69cb',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="fatiando 0.4 documentation" href="index.html" />
    <link rel="next" title="Contributors" href="contributors.html" />
    <link rel="prev" title="Optimization routines (fatiando.inversion.optimization)" href="api/inversion.optimization.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-38125837-1', 'auto');
    ga('send', 'pageview');
    </script>

  </head>
  <body role="document">




  <div id="navbar" class="navbar navbar-default navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><img src="_static/fatiando-logo.png">
          fatiando</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="install.html">Installing</a></li>
                <li><a href="docs.html">Documentation</a></li>
                <li><a href="cookbook.html">Cookbook</a></li>
                <li><a href="#">Developer Guide</a></li>
                <li><a href="https://github.com/fatiando/fatiando"><i class="fa fa-github-square fa-lg" title="Source code on Github"></i></a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="developer-guide">
<span id="develop"></span><h1>Developer guide<a class="headerlink" href="#developer-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The first thing you&#8217;ll need is a <a class="reference external" href="http://github.com/">Github</a> account.
You can sign up for free.
If you are an academic or student,
<a class="reference external" href="https://education.github.com/">request a free pro-account</a> to get access to
private repositories.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The easiest way to contribute is to
<a class="reference external" href="https://github.com/fatiando/fatiando/issues">submit issues and bug reports</a>.
Feature requests, typo fixes, suggestions for the documentation, it&#8217;s all
welcome!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are new to <strong>version control</strong> (or don&#8217;t know what that means),
start with the <a class="reference external" href="http://software-carpentry.org/">Software Carpentry lessons on version control with Git</a>.
After you&#8217;ve gone through those, the
Github <a class="reference external" href="https://help.github.com/">help page</a>
and <a class="reference external" href="https://guides.github.com/">guides</a>
are great resources for finding your way around the quirks of git and
Github.</p>
</div>
<p>All of the &#8220;official&#8221; code for Fatiando lives in the
<a class="reference external" href="https://github.com/fatiando/fatiando">fatiando/fatiando repository</a>
(the first <code class="docutils literal"><span class="pre">fatiando</span></code> refers to the
<a class="reference external" href="https://github.com/fatiando">fatiando Github account</a>).
The <em>master</em> branch of the repository contains the latest code that is
<strong>stable</strong> (should have tested and working code).
Code that is in <a class="reference external" href="https://github.com/fatiando/fatiando/branches">other branches</a>
are things that are under development by the
<a class="reference external" href="https://github.com/fatiando/fatiando/graphs/contributors">main developers</a>.</p>
<p>To contribute some code/fix/documentation, start by
<a class="reference external" href="https://github.com/fatiando/fatiando/fork">forking fatiando/fatiando</a>
(click the &#8220;Fork&#8221; button).
This will grab a complete copy of the code repository and add it to your
account.
This &#8220;fork&#8221; is isolated from the main repository, so you don&#8217;t have to worry
about &#8220;breaking&#8221; anything.
Go nuts!
If you break your fork beyond repair you can always delete it and make a new
fork.
Beware that you will lose <strong>everything</strong> in your fork if you delete it.</p>
<p>Once you have your fork, clone a copy to your computer:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone https://github.com/USERNAME/fatiando.git
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not sure what to work on? Have a look at the
<a class="reference external" href="https://github.com/fatiando/fatiando/issues">open issues</a>
and pick one that you find interesting.
<strong>Please leave a comment on the issue if you are going to work on it</strong>.
This helps us keep track of who is doing what and avoid duplicated work.
We are trying to curate a
<a class="reference external" href="https://github.com/fatiando/fatiando/issues?q=is%3Aopen+is%3Aissue+label%3A%22low-hanging+fruit%22">list of &#8220;low-hanging fruit&#8221;</a>
that are suitable for new-comers.
Note that &#8220;low-hanging&#8221; does not necessarily mean trivial,
but that it doesn&#8217;t require extensive knowledge of the project.
<strong>Helping by writing/reviewing/improving the documentation is VERY
appreciated</strong>. We welcome even the simplest typo fix!</p>
</div>
</div>
<div class="section" id="setting-up">
<h2>Setting up<a class="headerlink" href="#setting-up" title="Permalink to this headline">¶</a></h2>
<p>Once you have your fork and local clone, you should add it to your
<code class="docutils literal"><span class="pre">PYTHONPATH</span></code> environment variable so that you can <code class="docutils literal"><span class="pre">import</span> <span class="pre">fatiando</span></code>
directly from the source (without installing it).</p>
<p>First, make sure you have uninstalled Fatiando:</p>
<div class="highlight-python"><div class="highlight"><pre>pip uninstall fatiando
</pre></div>
</div>
<p>In GNU/Linux (or MacOS), add the following lines to your <code class="docutils literal"><span class="pre">~/.bashrc</span></code> file:</p>
<div class="highlight-python"><div class="highlight"><pre>export PYTHONPATH=path/to/fatiando/repository:$PYTHONPATH
</pre></div>
</div>
<p>In Windows,
create a <code class="docutils literal"><span class="pre">PYTHONPATH</span></code> variable and set it to the path to the <code class="docutils literal"><span class="pre">fatiando</span></code>
repository (e.g., <code class="docutils literal"><span class="pre">C:\Documents\User\repos\fatiando</span></code>).
Follow
<a class="reference external" href="http://www.computerhope.com/issues/ch000549.htm">this guide</a>
for instructions on setting environment variables.</p>
<p>You will need some extra dependencies installed for development.
If you are using Anaconda (and you should) run the following from the
repository base directory:</p>
<div class="highlight-python"><div class="highlight"><pre>conda install --file test/requirements-conda.txt
</pre></div>
</div>
<p>and:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install -r test/requirements-pip.txt
</pre></div>
</div>
<p>You will also need <a class="reference external" href="http://www.gnu.org/software/make/">make</a>, which usually
comes with GNU/Linux by default. On windows, you can get it through
<a class="reference external" href="http://msysgit.github.io/">msysGit</a>.
<strong>Don&#8217;t use the first &#8220;Download&#8221; button</strong>.
That will get you &#8220;Git for Windows&#8221;.
What you want is &#8220;msysGit&#8221; (download link at the bottom of the page).
That will give you a
<a class="reference external" href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">bash shell</a>,
git, and make.</p>
</div>
<div class="section" id="building">
<h2>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/fatiando/fatiando/blob/master/Makefile">Makefile</a>
contains all the commands for building the C extensions, testing, checking code
style, building the documentation, etc.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don&#8217;t know what <code class="docutils literal"><span class="pre">make</span></code> is or need a quick start, read the
<a class="reference external" href="http://software-carpentry.org/">Software Carpentry lessons on Automation and Make</a>.</p>
</div>
<p>To build the C-extensions (all of the <code class="docutils literal"><span class="pre">.c</span></code> files in the <code class="docutils literal"><span class="pre">fatiando</span></code>
folder):</p>
<div class="highlight-python"><div class="highlight"><pre>make build
</pre></div>
</div>
<p>If the repository is in your <code class="docutils literal"><span class="pre">PYTHONPATH</span></code> you will now be able to <code class="docutils literal"><span class="pre">import</span>
<span class="pre">fatiando</span></code> and use it directly from the repository.
This is important for running and testing the new code you are making
(that is why you can&#8217;t use the installed version of Fatiando).</p>
<p>The <code class="docutils literal"><span class="pre">.c</span></code> files were automatically generated using
<a class="reference external" href="http://cython.org/">Cython</a> from the <code class="docutils literal"><span class="pre">.pyx</span></code> files.
If you don&#8217;t change the <code class="docutils literal"><span class="pre">.pyx</span></code>  files, you have nothing to worry about.
If you make changes to the Cython code, then you&#8217;ll need to re-generate the
corresponding <code class="docutils literal"><span class="pre">.c</span></code> files.
To do that, run:</p>
<div class="highlight-python"><div class="highlight"><pre>make cython
</pre></div>
</div>
<p>This will also compile the newly generated C code.
Once you are done editing the <code class="docutils literal"><span class="pre">.pyx</span></code> files, make sure to commit the generated
<code class="docutils literal"><span class="pre">.c</span></code> file as well.</p>
</div>
<div class="section" id="testing">
<span id="develop-test"></span><h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Fatiando uses automated tests to check that the code works and
produces the expected results.
There are two types of tests currently being used:
unit tests and doc tests.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are new to automated tests, see the Software Carpentry lessons on
<a class="reference external" href="http://software-carpentry.org/">Testing: Unit Testing</a>.</p>
</div>
<p>Unit tests are implemented in the <code class="docutils literal"><span class="pre">test/test_*.py</span></code> files of the repository.
Doctests are part of the docstrings of functions and modules.
You&#8217;ll recognize them by the <code class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></code> in each line of code.
Both tests are found and run automatically by
<a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a>.</p>
<p>To run all tests and check that your build was successful:</p>
<div class="highlight-python"><div class="highlight"><pre>make test
</pre></div>
</div>
<p>This will also build the extensions if they are not built. Failures will
indicate which test failed and print some useful information.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last"><strong>All new code contributed must be tested</strong>.
This means that it must have unit
tests and/or doctests that make sure it gives the expected results.
Tests should also make sure that the proper errors happen when the code is
given bad input.
A good balance would be to have both
doctests that run a simple example (they are documentation, after all)
and unit tests that are more elaborate and complete
(using more data, testing corner/special cases, etc).</p>
</div>
<p><strong>Our goal</strong> is to reach at least 90% test coverage
<a class="reference external" href="https://github.com/fatiando/fatiando/issues/102">by version 1.0</a>.</p>
</div>
<div class="section" id="adding-new-code-fixes-docs">
<h2>Adding new code/fixes/docs<a class="headerlink" href="#adding-new-code-fixes-docs" title="Permalink to this headline">¶</a></h2>
<p><strong>All new code</strong> should be committed to a <strong>new branch</strong>.
Fatiando uses the
<a class="reference external" href="http://scottchacon.com/2011/08/31/github-flow.html">&#8220;Github Flow&#8221;</a>
for managing branches in the repository.
The tutorial <a class="reference external" href="https://guides.github.com/introduction/flow/index.html">&#8220;Understanding the Github flow&#8221;</a>
offers a quick visual introduction to how that works.
See the <a class="reference internal" href="#develop-pr"><span>Pull Requests</span></a> section below.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Don&#8217;t edit the <em>master</em> branch directly!</p>
</div>
<p>Before working on the code for a new feature/fix/documentation,
you&#8217;ll need to create a <em>branch</em> to store your commits.
Make sure you always start your new branch from <em>master</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>git checkout master
git checkout -b NAME_OF_NEW_BRANCH
</pre></div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">NAME_OF_NEW_BRANCH</span></code> to something relevant to the changes you are
proposing.
For example, <code class="docutils literal"><span class="pre">doc-devel-start-guide</span></code>, <code class="docutils literal"><span class="pre">refactor-gravmag-prism</span></code>,
<code class="docutils literal"><span class="pre">seismic-tomo-module</span></code>, etc.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last"><strong>Don&#8217;t make multiple large changes in a single branch.</strong>
For example,
refactoring a module to make it faster and adding a new function to a
different module.
If you do this, we will only be able to merge your code once <strong>all</strong> new
features are tested, discussed, and documented.
Make separate branches for different things you are working on
(and start all of them from <em>master</em>).
This way we can merge new changes as they are finished instead of having to
wait a long time to merge everything.
It will be even worse if one of the changes is controversial or needs a lot
of discussion and planning.</p>
</div>
<p>Once you have your new branch, you&#8217;re all set to start coding/writing.
Remember to run <code class="docutils literal"><span class="pre">make</span> <span class="pre">test</span></code> and check if your changes didn&#8217;t break anything.
<strong>Write tests sooner rather than later</strong>.
They will not only help you check if your new code is working properly,
but also provide you with a &#8220;deadline&#8221; of sorts.
When your code passes your tests, then it is probably &#8220;good enough&#8221;.</p>
<p>You should consider <a class="reference internal" href="#develop-pr"><span>openning a Pull Request</span></a>
as soon as have any code that you might want to share.
The sooner you open the PR, the sooner we can start reviewing it and helping
you make your contribution.</p>
</div>
<div class="section" id="code-style">
<h2>Code Style<a class="headerlink" href="#code-style" title="Permalink to this headline">¶</a></h2>
<p>Fatiando follows the <a class="reference external" href="http://legacy.python.org/dev/peps/pep-0008/">PEP8</a>
conventions for code style.</p>
<p>Conformance to PEP8 is checked automatically using the
<a class="reference external" href="https://pypi.python.org/pypi/pep8">pep8</a> package.
The check is part of the unit tests and will report a test failure when new
code is incorrectly formatted.
The test failure message will be something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>======================================================================
FAIL: all packages, tests, and cookbook conform to PEP8
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/home/leo/src/fatiando/test/test_pep8.py&quot;, line 13, in test_pep8_conformance
    &quot;Found code style errors (and warnings).&quot;)
AssertionError: Found code style errors (and warnings).

----------------------------------------------------------------------
</pre></div>
</div>
<p>To see which files/lines caused the error, run:</p>
<div class="highlight-python"><div class="highlight"><pre>$ make pep8
pep8 --exclude=_version.py fatiando test cookbook
fatiando/gravmag/prism.py:977:1: E302 expected 2 blank lines, found 1
make: *** [pep8] Error 1
</pre></div>
</div>
<p>This command will tell you exactly which file and line broke PEP8 compliance
and what was wrong with it.
In this case, line 977 of <code class="docutils literal"><span class="pre">fatiando/gravmag/prism.py</span></code> needs to have an extra
blank line.</p>
</div>
<div class="section" id="documentation">
<span id="develop-docs"></span><h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation for Fatiando is built using
<a class="reference external" href="http://sphinx-doc.org/">sphinx</a>.
The source files for the documentation are in the <code class="docutils literal"><span class="pre">doc</span></code> folder of the
repository.
The most sections of the docs are built from the <code class="docutils literal"><span class="pre">doc/*.rst</span></code> files.
The <a class="reference internal" href="api/fatiando.html#fatiando"><span>API</span></a> section is automatically built from the
<a class="reference external" href="http://legacy.python.org/dev/peps/pep-0257/">docstrings</a> of
packages, modules, functions, and classes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Source files and docstrings are written in reStructuredText (rst)
and converted by sphinx to HTML.
This <a class="reference external" href="http://sphinx-doc.org/rest.html">quick guide to rst</a>
is a good reference to get started with rst.</p>
</div>
<p><strong>Docstrings</strong> are formatted in a style particular to Fatiando.
<a class="reference external" href="http://legacy.python.org/dev/peps/pep-0257/">PEP257</a>
has some good general guidelines.
Have a look at the other docstrings in Fatiando and format your own to follow
that style.</p>
<p>Some brief guidelines:</p>
<ul>
<li><p class="first">Module docstrings should include a list of module classes and functions
followed by brief descriptions of each.</p>
</li>
<li><p class="first">Function docstrings:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="sd">r&quot;&quot;&quot;</span>
<span class="sd">    Brief description, like &#39;calculates so and so using bla bla bla&#39;</span>

<span class="sd">    A more detailed description follows after a blank line. Can have</span>
<span class="sd">    multiple paragraphs, citations (Bla et al.,  2014), and equations.</span>

<span class="sd">    .. math::</span>

<span class="sd">        g(y) = \int_V y x dx</span>

<span class="sd">    After this, give a full description of ALL parameters the</span>
<span class="sd">    function takes.</span>

<span class="sd">    Parameters:</span>

<span class="sd">    * x : float or numpy array</span>
<span class="sd">        The variable that goes on the horizontal axis. In Meh units.</span>
<span class="sd">    * y : float or numpy array</span>
<span class="sd">        The variable that goes on the vertical axis. In Meh units.</span>
<span class="sd">        Default: 4.</span>

<span class="sd">    Returns:</span>

<span class="sd">    * g : float or numpy array</span>
<span class="sd">        The value of g(y) as calculated by the equation above.</span>

<span class="sd">    Examples:</span>

<span class="sd">    You can include examples as doctests. These are automatically found</span>
<span class="sd">    by the test suite and executed. Lines starting with &gt;&gt;&gt; are code.</span>
<span class="sd">    Lines below them that don&#39;t have &gt;&gt;&gt; are the result of that code.</span>
<span class="sd">    The tests compare the given result with what you put as the</span>
<span class="sd">    expected result.</span>

<span class="sd">    &gt;&gt;&gt; foo(3)</span>
<span class="sd">    25</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; foo(np.array([1, 2])</span>
<span class="sd">    array([ 45.  34. ])</span>

<span class="sd">    References:</span>

<span class="sd">    Include a list of references cited.</span>

<span class="sd">    Bla B., and Meh M. (2014). Some relevant article describing the</span>
<span class="sd">    methods. Journal. doi:82e1hd1puhd7</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Class docstrings will contain a description of the class and the parameters
that <cite>__init__</cite> takes. It should also include examples (as doctests when
possible) and references. Pretty much like function docstrings.</p>
</li>
</ul>
<p>You&#8217;ll need to install the <a class="reference external" href="https://github.com/ryan-roemer/sphinx-bootstrap-theme">Sphinx bootstrap theme</a> to build the docs.
Run this in your terminal/cmd.exe:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install sphinx_bootstrap_theme
</pre></div>
</div>
<p>To compile the documentation, run:</p>
<div class="highlight-python"><div class="highlight"><pre>make docs
</pre></div>
</div>
<p>To view the compiled HTML files, run:</p>
<div class="highlight-python"><div class="highlight"><pre>make view-docs
</pre></div>
</div>
<p>This will start a server in the <code class="docutils literal"><span class="pre">doc/_build/html</span></code> folder.
Point your browser to <a class="reference external" href="http://127.0.0.1:8008/">http://127.0.0.1:8008</a>
to view the site.
Use <code class="docutils literal"><span class="pre">Ctrl+C</span></code> to stop the server.</p>
</div>
<div class="section" id="pull-requests">
<span id="develop-pr"></span><h2>Pull Requests<a class="headerlink" href="#pull-requests" title="Permalink to this headline">¶</a></h2>
<p>Pull requests (PRs) are how we submit new code and fixes to Fatiando.
The PRs are were your contribution will be revised by other developers.
This works a lot like peer-review does in Science, but we hope you&#8217;ll find it a
much nicer experience!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To get the general idea of the Pull Request cycle, see
<a class="reference external" href="https://guides.github.com/introduction/flow/index.html">&#8220;Understanding the Github flow&#8221;</a>.</p>
</div>
<p>After you have your set of changes in a new branch of your <code class="docutils literal"><span class="pre">fatiando</span></code> fork,
make a Pull Request to the <em>master</em> branch of
<a class="reference external" href="https://github.com/fatiando/fatiando">fatiando/fatiando</a>.
Use the main text of the PR to describe in detail what you have done and why.
Explain the purpose of the PR.
What changes are you proposing and why they are
good/awesome/necessary/desirable?
See <a class="reference external" href="https://github.com/fatiando/fatiando/pull/137">PR 137</a> for an example.</p>
<p>PRs serve as a platform for reviewing the code.
Ideally, someone else will go through your code to make sure there aren&#8217;t any
obvious mistakes.
The reviewer can also suggest improvements, help with unfixed problems, etc.
This is the same as the peer-review processes in scientific publication
(or at least what it should be).
See the
<a class="reference external" href="https://github.com/fatiando/fatiando/pulls?q=is%3Apr+is%3Amerged">list of completed pull requests</a>
for examples of how the process works.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Reviewers should <strong>always be polite</strong> in their <strong>constructive</strong> criticism.
Rudeness and prejudice will not be tolerated.
<strong>Beware of wit, humor, and sarcasm</strong>.
It might not always be understood in writting
and not always translates accross native languages.</p>
</div>
<p>PRs will only be merged if they meet certain criteria:</p>
<ul class="simple">
<li>New code must be have <a class="reference internal" href="#develop-test"><span>automated tests</span></a></li>
<li>All tests must pass (this will be evaluated automatically by
<a class="reference external" href="https://travis-ci.org/fatiando/fatiando/">TravisCI</a>)</li>
<li>All code must follow the
<a class="reference external" href="http://legacy.python.org/dev/peps/pep-0008/">PEP8</a> style conventions.
This will also be check automatically by the tests and TravisCI</li>
<li>All new code and changes must be documented with
<a class="reference internal" href="#develop-docs"><span>docstrings</span></a></li>
<li>New code must not cause merge conflicts (someone will help you resolve this
in case it happens and you don&#8217;t know what to do)</li>
</ul>
<p>Even if all of these requirements are met,
features that fall outside of the scope of the project might not be
accepted (but we will discuss the possibility).
So <strong>before you start coding</strong>
open <a class="reference external" href="https://github.com/fatiando/fatiando/issues">an issue</a> explaining what
you mean to do first so that we can discuss it.
Check if there isn&#8217;t an issue open for this already.
This way we can keep track of who is working on what and avoid duplicated work.</p>
<p>To help keep track of what you need to do,
copy this checklist to the PR description
(adapted from the
<a class="reference external" href="http://khmer.readthedocs.org/en/v1.1/development.html#checklist">khmer docs</a>):</p>
<div class="highlight-python"><div class="highlight"><pre>## Checklist:

- [ ] Make tests for new code
- [ ] Create/update docstrings
- [ ] Include relevant equations and citations in docstrings
- [ ] Code follows PEP8 style conventions
- [ ] Code and docs have been spellchecked
- [ ] Include new dependencies in docs, requirements.txt, README, and .travis.yml
- [ ] Documentation builds properly
- [ ] All tests pass
- [ ] Can be merged
- [ ] Changelog entry (leave for last)
- [ ] Firt-time contributor? Add yourself to `doc/contributors.rst` (leave for last)
</pre></div>
</div>
<p>This will create check boxes that you can mark as you complete each of the
requirements.
If you don&#8217;t know how to do some of them, contact a developer
by writing a comment on the PR &#64;-mentioning their user name
(e.g., <a class="reference external" href="https://github.com/leouieda/">&#64;leouieda</a>
or <a class="reference external" href="https://github.com/birocoles/">&#64;birocoles</a>).</p>
</div>
<div class="section" id="making-a-release">
<h2>Making a release<a class="headerlink" href="#making-a-release" title="Permalink to this headline">¶</a></h2>
<p>This is intended as a checklist for packaging to avoid forgetting some
important steps.
Packaging is not something that has to be done very frequently and few
developers will need to worry about this.</p>
<p>These steps have to made from a clone of the main repository
(the one on the <a class="reference external" href="https://github.com/fatiando">fatiando</a> Github organization).
You&#8217;ll need push rights to this repository for making a release.
If you don&#8217;t have the rights,
send a message to
<a class="reference external" href="https://groups.google.com/d/forum/fatiando">the mailing list</a>
and we&#8217;ll see what we can do.</p>
<p>You&#8217;ll also need to have maintainer rights on <a class="reference external" href="https://pypi.python.org/pypi">PyPI</a>.
Sign-up for an account there if you don&#8217;t
have one and ask to be added as a maintainer.</p>
<ol class="arabic" start="0">
<li><p class="first">Make sure you have a <code class="docutils literal"><span class="pre">.pypirc</span></code> file in your home directory. It should look
something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>[distutils]
index-servers=
    pypi

[pypi]
repository = https://pypi.python.org/pypi
username = &lt;your username&gt;
</pre></div>
</div>
</li>
<li><p class="first">Make sure you&#8217;re on the <code class="docutils literal"><span class="pre">master</span></code> branch and your repository is
up-to-date:</p>
<div class="highlight-python"><div class="highlight"><pre>git checkout master
git pull
</pre></div>
</div>
</li>
<li><p class="first">Include the version number (e.g. <code class="docutils literal"><span class="pre">0.3</span></code>) and the release date on
<code class="docutils literal"><span class="pre">doc/changelog.rst</span></code>. <strong>Make sure to commit your changes!</strong></p>
</li>
<li><p class="first">Check that the documentation builds properly. <code class="docutils literal"><span class="pre">make</span> <span class="pre">view-docs</span></code> will serve
the generated HTML files. Point your browser to
<a class="reference external" href="http://127.0.0.1:8008">http://127.0.0.1:8008</a> to view them.
Use <code class="docutils literal"><span class="pre">Ctrl+C</span></code> to stop the server.:</p>
<div class="highlight-python"><div class="highlight"><pre>make docs
make view-docs
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Install the ReadTheDocs theme for sphinx if you don&#8217;t have it
<code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sphinx-rtd-theme</span></code>.</p>
</div>
<ol class="arabic" start="4">
<li><p class="first">Make sure all tests pass:</p>
<div class="highlight-python"><div class="highlight"><pre>make test
</pre></div>
</div>
</li>
<li><p class="first">Try to build the source packages. Check for any error messages and inspect
the zip and tar files, just to make sure:</p>
<div class="highlight-python"><div class="highlight"><pre>make package
</pre></div>
</div>
</li>
<li><p class="first">If everything is tested and works properly, you&#8217;re ready to tag this release
with a version number. <strong>Make sure you have don&#8217;t have any uncommited
changes!</strong>. The version number should be the same as the corresponding
<a class="reference external" href="https://github.com/fatiando/fatiando/milestones">Github milestone</a>
(e.g., 0.3). The version number should have a <code class="docutils literal"><span class="pre">v</span></code> before it:</p>
<div class="highlight-python"><div class="highlight"><pre>git tag v0.3
</pre></div>
</div>
</li>
<li><p class="first">Check if versioneer is setting the correct version number (should print
something like <code class="docutils literal"><span class="pre">v0.3</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>python -c &quot;import fatiando; print fatiando.__version__&quot;
</pre></div>
</div>
</li>
<li><p class="first">Push the tag to Github:</p>
<div class="highlight-python"><div class="highlight"><pre>git push --tags
</pre></div>
</div>
</li>
<li><p class="first">Upload the built package (zip and tar files) to PyPI. Uses <a class="reference external" href="https://github.com/pypa/twine">twine</a> for the upload. Install it using
<code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">twine</span></code>.:</p>
<div class="highlight-python"><div class="highlight"><pre>make clean
make package
twine upload dist/* -p YOUR_PYPI_PASSWORD
</pre></div>
</div>
</li>
<li><p class="first">Test the upload:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install --upgrade fatiando
export PYTHONPATH=&quot;&quot;; cd ~; python -c &quot;import fatiando; print fatiando.__version__&quot;
</pre></div>
</div>
</li>
<li><p class="first">Edit the
<a class="reference external" href="https://github.com/fatiando/fatiando/releases">release on Github</a>
with some highlights of the changelog.</p>
</li>
</ol>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
    <div class="container">
        <p class="pull-right">
            <a href="#">Back to top</a>
            
                <br/>
                
<div id="sourcelink">
  <a href="_sources/develop.txt"
     rel="nofollow">Source</a>
</div>
            
        </p>

        <p class="text-center">
            &copy; Copyright 2010-2016, Leonardo Uieda.
            Created using <a
                href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
        </p>
    </div>
</footer>
  </body>
</html>